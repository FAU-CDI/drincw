!function(){let e=document.getElementById("form"),t=document.getElementById("pathbuilder"),n=document.getElementById("result"),l=document.getElementById("resultstatus"),a=document.getElementById("openresult"),d=document.getElementById("uploadfile"),c=document.getElementById("filestatus"),o=document.getElementById("fakebutton"),u=document.getElementById("selectors"),i=document.getElementById("uploadselectors"),r=document.getElementById("selectorbutton"),s=document.getElementById("selectorstatus"),m=document.getElementById("selector-load"),f=document.getElementById("selector-empty");function y(e,t,n,l){e.addEventListener("click",e=>{e.preventDefault(),t.click()}),t.addEventListener("change",async e=>{let a=t.files;if(null===a||1!==a.length){l("No file(s) selected, nothing loaded. ",!1);return}let d=a[0];if(d.size>1048576){l("Unable to load pathbuilder, filesize exceeds 1 MB. ",!1);return}let c=await d.text();n.value=c,l(`Successfully loaded ${JSON.stringify(d.name)}.`,!0)})}function v(e,t){c.innerHTML="",c.append(document.createTextNode(e)),c.setAttribute("class",t?"ok":"fail")}y(o,d,t,v),v("",!1),y(r,i,u,b),f.addEventListener("click",e=>{e.preventDefault(),u.value="",b("Selectors removed. ",!0)});let p=0;async function E(e){let[n,l]=await g(t.value);e===p&&(b(l?"Generated selectors. ":n,l),u.value=n)}async function g(e){let t=await fetch("api/v2/makeselectors",{method:"POST",body:e});return[await t.text(),t.ok]}function b(e,t){s.innerHTML="",s.append(document.createTextNode(e)),s.setAttribute("class",t?"ok":"fail")}m.addEventListener("click",e=>{e.preventDefault(),E(++p)}),b("",!1);let B=0;async function I(e){let[n,l]=await k(t.value,u.value.trim());e===B&&(h(l?"Generated odbc file. ":n,l),L(n,l))}async function k(e,t){let n=await fetch("api/v2/makeodbc",{method:"POST",body:JSON.stringify([e,t])});return[await n.text(),n.ok]}function h(e,t){l.innerHTML="",l.append(document.createTextNode(e)),l.setAttribute("class",t?"ok":"fail")}function L(e,t){if(!t){n.value="",a.removeAttribute("href");return}n.value=e;let l="data:text/plain;base64,"+btoa(e);a.setAttribute("href",l)}e.addEventListener("submit",e=>{e.preventDefault(),I(++B)}),h("",!1),L("",!1),n.addEventListener("click",e=>{e.preventDefault(),n.select()})}();