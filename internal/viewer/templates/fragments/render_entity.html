{{ $globals := .Globals }}

<table class="entity_table">
    <thead>
        <tr>
            <th>Name</th>
            <th>Type</th>
            <th>Card</th>
            <th>Value(s)</th>
            <th>Triples</th>
        </tr>
    </thead>
    <tbody>
        {{ $entity := .Entity }}

        {{ range $field := .Bundle.Fields }}
        {{ $name := $field.ID }}
        {{ $values := index $entity.Fields $name }}
        
        {{ $l := len $values }}
        <tr>
            <td class="collapse" {{ if ne $l 0 }}rowspan="{{ $l }}" {{end}}>
                {{ $field.Name }}
            </td>
            <td class="collapse" {{ if ne $l 0 }}rowspan="{{ $l }}" {{end}}>
                {{ $field.FieldType }}
            </td>
            <td class="collapse" {{ if ne $l 0 }}rowspan="{{ $l }}" {{end}}>
                {{ $field.Cardinality }}
            </td>

        {{ if eq $l 0 }}
            <td colspan="3"></td>
        </tr>
        {{ end }}

        {{ range $i, $value := $values }}
        {{ if ne $i 0 }}
        <tr>
        {{ end }}
            <td>
                {{ template "render_value.html" combine "Globals" $globals "Field" $field "Value" $value }}
            </td>
            <td class="break">
                {{ range $value.Triples $field }}
                {{ . }}<br />
                {{ end }}
            </td>
        </tr>
        {{ end }}
        {{ end }}
    </tbody>
</table>