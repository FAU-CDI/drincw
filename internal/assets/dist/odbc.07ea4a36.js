const e=document.getElementById("form"),t=document.getElementById("pathbuilder"),n=document.getElementById("result"),o=document.getElementById("resultstatus"),a=document.getElementById("openresult"),c=document.getElementById("uploadfile"),l=document.getElementById("filestatus"),d=document.getElementById("fakebutton"),u=document.getElementById("selectors"),i=document.getElementById("uploadselectors"),s=document.getElementById("selectorbutton"),r=document.getElementById("selectorstatus"),m=document.getElementById("selector-load"),f=document.getElementById("selector-empty");function v(e,t,n,o){e.addEventListener("click",(e=>{e.preventDefault(),t.click()})),t.addEventListener("change",(async e=>{const a=t.files;if(null===a||1!==a.length)return void o("No file(s) selected, nothing loaded. ",!1);const c=a[0];if(c.size>1048576)return void o("Unable to load pathbuilder, filesize exceeds 1 MB. ",!1);const l=await c.text();n.value=l,o(`Successfully loaded ${JSON.stringify(c.name)}.`,!0)}))}function y(e,t){l.innerHTML="",l.append(document.createTextNode(e)),l.setAttribute("class",t?"ok":"fail")}v(d,c,t,y),y("",!1),v(s,i,u,E),f.addEventListener("click",(e=>{e.preventDefault(),u.value="",E("Selectors removed. ",!0)}));let p=0;function E(e,t){r.innerHTML="",r.append(document.createTextNode(e)),r.setAttribute("class",t?"ok":"fail")}m.addEventListener("click",(e=>{e.preventDefault(),p++,async function(e){const[n,o]=await async function(e){const t=await fetch("api/v2/makeselectors",{method:"POST",body:e});return[await t.text(),t.ok]}(t.value);if(e!==p)return;E(o?"Generated selectors. ":n,o),u.value=n}(p)})),E("",!1);let g=0;function b(e,t){o.innerHTML="",o.append(document.createTextNode(e)),o.setAttribute("class",t?"ok":"fail")}function B(e,t){if(!t)return n.value="",void a.removeAttribute("href");n.value=e;const o="data:text/plain;base64,"+btoa(e);a.setAttribute("href",o)}e.addEventListener("submit",(e=>{e.preventDefault(),g++,async function(e){const[n,o]=await async function(e,t){const n=await fetch("api/v2/makeodbc",{method:"POST",body:JSON.stringify([e,t])});return[await n.text(),n.ok]}(t.value,u.value.trim());if(e!==g)return;b(o?"Generated odbc file. ":n,o),B(n,o)}(g)})),b("",!1),B("",!1),n.addEventListener("click",(e=>{e.preventDefault(),n.select()}));