{{ template "head.html" . }}
{{ $globals := .Globals }}
<title>TasteD - Entity {{ .Entity.URI }}</title>

<header>
    <h1>{{ .Entity.URI }}</h1>
</header>

<nav>
    <a href="/">Bundles</a> &gt;
    <a href="/bundle/{{ .Bundle.Group.ID }}">Bundle {{ .Bundle.Group.Name }}</a> &gt;
    <b>Entity {{ .Entity.URI }}</b>
</nav>

<main>
    <h2>Fields</h2>
    {{ $bundle := .Bundle }}
    {{ template "render_entity.html" combine "Globals" $globals "Entity" .Entity "Bundle" $bundle }}
    
    <h2>Sub Bundles</h2>
    {{ range $name, $values := .Entity.Children }}
        {{ $cbundle := $bundle.Bundle $name }}
        <h3>{{ $name }}</h3>
        {{ range $values }}
            {{ template "render_entity.html" combine "Globals" $globals "Entity" . "Bundle" $cbundle }}
        {{ end }}
    {{ end }}

    <h2>Aliases</h2>
    <ul>
        {{ range .Aliases }}
        <li><code>{{ . }}</code></li>
        {{ end }}
    </ul>
</main>

{{ template "foot.html" . }}